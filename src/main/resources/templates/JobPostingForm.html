<!--<!DOCTYPE html>-->
<!--<html lang="en" xmlns:th="http://www.thymeleaf.org">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <title>Create Job Posting</title>-->
<!--    <link rel="icon" type="image/png" href="/images/Logo Glass Large.png">-->
<!--    <link rel="stylesheet" th:href="@{/InternMapSignIn.css}">-->
<!--    <link rel="preconnect" href="https://fonts.googleapis.com">-->
<!--    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>-->
<!--    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--</head>-->

<!--<header>-->
<!--    <div class="header-top">-->
<!--        <nav class="header-nav">-->
<!--            <a th:href="@{/login}">-->
<!--                <button class="btn-header primary">Sign In</button>-->
<!--            </a>-->
<!--        </nav>-->
<!--    </div>-->
<!--    <div class="header-hero">-->
<!--        <img class="logo" th:src="@{/images/Logo Glass.png}" alt="InternMap Logo">-->
<!--    </div>-->
<!--</header>-->

<!--<body>-->
<!--<h2 class="form-title">Create a Job Posting</h2>-->
<!--<div class="form-container">-->

<!--    <div th:if="${success}"-->
<!--         style="color: #155724; background-color: #d4edda; border: 1px solid #c3e6cb; padding: 12px; margin-bottom: 20px; border-radius: 8px;">-->
<!--        <p th:text="${success}" style="margin: 0;"></p>-->
<!--    </div>-->

<!--    <div th:if="${errorMessage}"-->
<!--         style="color: #721c24; background-color: #f8d7da; border: 1px solid #f5c6cb; padding: 12px; margin-bottom: 20px; border-radius: 8px;">-->
<!--        <p th:text="${errorMessage}" style="margin: 0;"></p>-->
<!--    </div>-->

<!--    <form th:action="@{/JobPostingForm}" th:object="${jobPosting}" method="post">-->

<!--        <div class="form-row">-->
<!--            <div class="form-group">-->
<!--                <label>-->
<!--                    <input type="text"-->
<!--                           class="form-input"-->
<!--                           th:field="*{jobName}"-->
<!--                           placeholder="Job Title"-->
<!--                           required />-->
<!--                </label>-->
<!--            </div>-->

<!--            <div class="form-group">-->
<!--                <label>-->
<!--                    <input type="text"-->
<!--                           class="form-input"-->
<!--                           th:field="*{companyName}"-->
<!--                           placeholder="Company Name"-->
<!--                           required />-->
<!--                </label>-->
<!--            </div>-->

<!--            <div class="form-group">-->
<!--                <label>-->
<!--                    <input type="text"-->
<!--                           class="form-input"-->
<!--                           th:field="*{jobDescription}"-->
<!--                           placeholder="Job Description"-->
<!--                           required />-->
<!--                </label>-->
<!--            </div>-->

<!--            <div class="form-group">-->
<!--                <label>-->
<!--                    <input type="text"-->
<!--                           class="form-input"-->
<!--                           th:field="*{jobRequirements}"-->
<!--                           placeholder="Job Requirements"-->
<!--                           required />-->
<!--                </label>-->
<!--            </div>-->

<!--            <div class="form-group">-->
<!--                <label>-->
<!--                    <select class="form-input" th:field="*{jobPostingType}" id="jobTypeSelect" onchange="toggleJobSpecificFields()" required >-->
<!--                        <option value="" disabled selected>Select Job Type</option>-->
<!--                        <option value="FullTime">FullTime</option>-->
<!--                        <option value="PartTime">PartTime</option>-->
<!--                        <option value="Internship">Internship</option>-->
<!--                        <option value="FreeLanceProject">Freelance Project</option>-->
<!--                    </select>-->
<!--                </label>-->
<!--            </div>-->

<!--            &lt;!&ndash; Removed th:if, added id="fullTimeFields", set initial style="display: none;" &ndash;&gt;-->
<!--            <div id="fullTimeFields" style="display: none;">-->
<!--                <div class="form-group">-->
<!--                    <label>-->
<!--                        <input type="text"-->
<!--                               class="form-input"-->
<!--                               th:field="*{fullTime.benefits}"-->
<!--                               placeholder="benefits"-->
<!--                               required />-->
<!--                    </label>-->
<!--                </div>-->
<!--                <div class="form-group">-->
<!--                    <label>-->
<!--                        <input type="text"-->
<!--                               class="form-input"-->
<!--                               th:field="*{fullTime.company.location}">-->
<!--                    </label>-->
<!--                </div>-->
<!--            </div>-->
<!--            <div id="internshipFields" style="display: none;">-->
<!--                <div class="form-group">-->
<!--                    <label>-->
<!--                        <input type="text"-->
<!--                               class="form-input"-->
<!--                               th:field="*{internship.duration}"-->
<!--                               placeholder="duration"-->
<!--                               required />-->
<!--                    </label>-->
<!--                </div>-->
<!--                <div class="form-group">-->
<!--                    <label>-->
<!--                        <input type="text"-->
<!--                               class="form-input"-->
<!--                               th:field="*{internship.company.location}">-->
<!--                    </label>-->
<!--                </div>-->
<!--            </div>-->

<!--            &lt;!&ndash; Removed th:if, added id="freeLanceProjectFields", set initial style="display: none;" &ndash;&gt;-->
<!--            <div id="freeLanceProjectFields" style="display: none;">-->
<!--                <div class="form-group">-->
<!--                    <label>-->
<!--                        <input type="text"-->
<!--                               class="form-input"-->
<!--                               th:field="*{freeLanceProject.duration}"-->
<!--                               placeholder="duration"-->
<!--                               required />-->
<!--                    </label>-->
<!--                </div>-->
<!--                <div class="form-group">-->
<!--                    <label>-->
<!--                        <input type="text"-->
<!--                               class="form-input"-->
<!--                               th:field="*{freeLanceProject.Payout}"-->
<!--                               placeholder="payout">-->
<!--                    </label>-->
<!--                </div>-->
<!--                <div class="form-group">-->
<!--                    <label>-->
<!--                        <input type="text"-->
<!--                               class="form-input"-->
<!--                               th:field="*{FreeLanceProject.jobLocation}"-->
<!--                               placeholder="location">-->
<!--                    </label>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->

<!--        <button type="submit" class="form-submit">Add Job Posting</button>-->
<!--    </form>-->
<!--</div>-->
<!--<div th:replace="~{fragments/footer}"></div>-->
<!--</body>-->
<!--<script>-->
<!--    function toggleJobSpecificFields() {-->
<!--        let selectElement = document.getElementById("jobTypeSelect");-->
<!--        let selectedValue = selectElement.value;-->

<!--        // Get all field containers-->
<!--        let fullTimeDiv = document.getElementById("fullTimeFields");-->
<!--        let internshipDiv = document.getElementById("internshipFields");-->
<!--        let freelanceDiv = document.getElementById("freeLanceProjectFields");-->

<!--        // Hide all fields first-->
<!--        fullTimeDiv.style.display = "none";-->
<!--        internshipDiv.style.display = "none";-->
<!--        freelanceDiv.style.display = "none";-->

<!--        // Clear required attributes from all hidden fields-->
<!--        clearRequired("fullTimeBenefits");-->
<!--        clearRequired("fullTimeLocation");-->
<!--        clearRequired("internshipDuration");-->
<!--        clearRequired("internshipLocation");-->
<!--        clearRequired("freelanceDuration");-->
<!--        clearRequired("freelancePayout");-->
<!--        clearRequired("freelanceLocation");-->

<!--        // Show selected fields and set required-->
<!--        if (selectedValue === "FullTime") {-->
<!--            fullTimeDiv.style.display = "block";-->
<!--            setRequired("fullTimeBenefits");-->
<!--            setRequired("fullTimeLocation");-->
<!--        } else if (selectedValue === "Internship") {-->
<!--            internshipDiv.style.display = "block";-->
<!--            setRequired("internshipDuration");-->
<!--            setRequired("internshipLocation");-->
<!--        } else if (selectedValue === "FreeLanceProject") {-->
<!--            freelanceDiv.style.display = "block";-->
<!--            setRequired("freelanceDuration");-->
<!--            setRequired("freelancePayout");-->
<!--            setRequired("freelanceLocation");-->
<!--        }-->
<!--    }-->

<!--    function setRequired(elementId) {-->
<!--        let element = document.getElementById(elementId);-->
<!--        if (element) {-->
<!--            element.required = true;-->
<!--        }-->
<!--    }-->

<!--    function clearRequired(elementId) {-->
<!--        let element = document.getElementById(elementId);-->
<!--        if (element) {-->
<!--            element.required = false;-->
<!--            element.value = ""; // Clear the value-->
<!--        }-->
<!--    }-->

<!--    // Initialize on page load-->
<!--    document.addEventListener('DOMContentLoaded', function() {-->
<!--        // Add event listener to the select-->
<!--        let selectElement = document.getElementById("jobTypeSelect");-->
<!--        if (selectElement) {-->
<!--            selectElement.addEventListener('change', toggleJobSpecificFields);-->
<!--        }-->

<!--        // Initial toggle based on current value-->
<!--        toggleJobSpecificFields();-->
<!--    });-->
<!--</script>-->


<!--</html>-->
<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Create Job Posting</title>
    <link rel="icon" type="image/png" href="/images/Logo Glass Large.png">
    <link rel="stylesheet" th:href="@{/InternMapSignIn.css}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<header>
    <div class="header-top">
        <nav class="header-nav">
            <a th:href="@{/login}">
                <button class="btn-header primary">Sign In</button>
            </a>
        </nav>
    </div>
    <div class="header-hero">
        <img class="logo" th:src="@{/images/Logo Glass.png}" alt="InternMap Logo">
    </div>
</header>

<body>
<h2 class="form-title">Create a Job Posting</h2>
<div class="form-container">

    <div th:if="${success}"
         style="color: #155724; background-color: #d4edda; border: 1px solid #c3e6cb; padding: 12px; margin-bottom: 20px; border-radius: 8px;">
        <p th:text="${success}" style="margin: 0;"></p>
    </div>

    <div th:if="${errorMessage}"
         style="color: #721c24; background-color: #f8d7da; border: 1px solid #f5c6cb; padding: 12px; margin-bottom: 20px; border-radius: 8px;">
        <p th:text="${errorMessage}" style="margin: 0;"></p>
    </div>

    <form th:action="@{/JobPostingForm}" method="post">
        <input type="hidden" name="jobPostingType" id="jobPostingTypeHidden" value="">

        <div class="form-row">
            <!-- Job Type Selection First -->
            <div class="form-group">
                <label>
                    <select class="form-input" id="jobTypeSelect" required>
                        <option value="" disabled selected>Select Job Type</option>
                        <option value="Internship">Internship</option>
                        <option value="FullTime">Full Time</option>
                        <option value="FreeLanceProject">Freelance Project</option>
                    </select>
                </label>
            </div>

            <!-- Common Fields -->
            <div class="form-group">
                <label>
                    <input type="text"
                           class="form-input"
                           name="jobName"
                           placeholder="Job Title"
                           required />
                </label>
            </div>

            <div class="form-group">
                <label>
                    <input type="text"
                           class="form-input"
                           name="companyName"
                           placeholder="Company Name"
                           required />
                </label>
            </div>

            <div class="form-group">
                <label>
                    <input type="text"
                           class="form-input"
                           name="jobDescription"
                           placeholder="Job Description"
                           required />
                </label>
            </div>

            <div class="form-group">
                <label>
                    <input type="text"
                           class="form-input"
                           name="jobRequirements"
                           placeholder="Job Requirements"
                           required />
                </label>
            </div>

            <!-- Full Time Specific Fields -->
            <div id="fullTimeFields" style="display: none;">
                <div class="form-group">
                    <label>
                        <input type="text"
                               class="form-input"
                               name="benefits"
                               placeholder="Benefits"
                               id="fullTimeBenefits" />
                    </label>
                </div>
                <div class="form-group">
                    <label>
                        <input type="text"
                               class="form-input"
                               name="location"
                               placeholder="Location"
                               id="fullTimeLocation" />
                    </label>
                </div>
            </div>

            <!-- Internship Specific Fields -->
            <div id="internshipFields" style="display: none;">
                <div class="form-group">
                    <label>
                        <input type="text"
                               class="form-input"
                               name="duration"
                               placeholder="Duration (e.g., 3 months)"
                               id="internshipDuration" />
                    </label>
                </div>
                <div class="form-group">
                    <label>
                        <input type="text"
                               class="form-input"
                               name="location"
                               placeholder="Location"
                               id="internshipLocation" />
                    </label>
                </div>
            </div>

            <!-- Freelance Project Specific Fields -->
            <div id="freeLanceProjectFields" style="display: none;">
                <div class="form-group">
                    <label>
                        <input type="text"
                               class="form-input"
                               name="duration"
                               placeholder="Duration"
                               id="freelanceDuration" />
                    </label>
                </div>
                <div class="form-group">
                    <label>
                        <input type="text"
                               class="form-input"
                               name="payout"
                               placeholder="Payout"
                               id="freelancePayout" />
                    </label>
                </div>
                <div class="form-group">
                    <label>
                        <input type="text"
                               class="form-input"
                               name="jobLocation"
                               placeholder="Location"
                               id="freelanceLocation" />
                    </label>
                </div>
            </div>
        </div>

        <button type="submit" class="form-submit">Add Job Posting</button>
    </form>
</div>
<div th:replace="~{fragments/footer}"></div>
</body>

<script>
    function toggleJobSpecificFields() {
        let selectElement = document.getElementById("jobTypeSelect");
        let selectedValue = selectElement.value;

        // Update hidden field
        document.getElementById("jobPostingTypeHidden").value = selectedValue;

        // Get all field containers
        let fullTimeDiv = document.getElementById("fullTimeFields");
        let internshipDiv = document.getElementById("internshipFields");
        let freelanceDiv = document.getElementById("freeLanceProjectFields");

        // Hide all fields first
        fullTimeDiv.style.display = "none";
        internshipDiv.style.display = "none";
        freelanceDiv.style.display = "none";

        // Clear required attributes from all hidden fields
        clearRequired("fullTimeBenefits");
        clearRequired("fullTimeLocation");
        clearRequired("internshipDuration");
        clearRequired("internshipLocation");
        clearRequired("freelanceDuration");
        clearRequired("freelancePayout");
        clearRequired("freelanceLocation");

        // Show selected fields and set required
        if (selectedValue === "FullTime") {
            fullTimeDiv.style.display = "block";
            setRequired("fullTimeBenefits");
            setRequired("fullTimeLocation");
        } else if (selectedValue === "Internship") {
            internshipDiv.style.display = "block";
            setRequired("internshipDuration");
            setRequired("internshipLocation");
        } else if (selectedValue === "FreeLanceProject") {
            freelanceDiv.style.display = "block";
            setRequired("freelanceDuration");
            setRequired("freelancePayout");
            setRequired("freelanceLocation");
        }
    }

    function setRequired(elementId) {
        let element = document.getElementById(elementId);
        if (element) {
            element.required = true;
        }
    }

    function clearRequired(elementId) {
        let element = document.getElementById(elementId);
        if (element) {
            element.required = false;
            element.value = "";
        }
    }

    // Initialize on page load
    document.addEventListener('DOMContentLoaded', function() {
        let selectElement = document.getElementById("jobTypeSelect");
        if (selectElement) {
            selectElement.addEventListener('change', toggleJobSpecificFields);
        }
        toggleJobSpecificFields();
    });
</script>

</html>
